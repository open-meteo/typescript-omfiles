<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OM File Viewer</title>

    <!-- Third-party libraries -->
    <!-- Note: AWS SDK might not be needed if using S3Backend directly -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/aws-sdk@2.1030.0/dist/aws-sdk.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/plotly.js@2.16.1/dist/plotly.min.js"></script>

    <!-- Use Vite's development server to load TypeScript directly -->
    <script type="module" src="/src/web-demo.ts"></script>

    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        max-width: 1200px;
        margin: 0 auto;
      }
      #plotArea {
        width: 100%;
        height: 600px;
      }
      .controls {
        margin: 20px 0;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      button {
        padding: 8px 16px;
        background: #4caf50;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      button:disabled {
        background: #cccccc;
      }
      input[type="text"] {
        padding: 8px;
        width: 400px;
      }
      .timestamp-nav {
        display: flex;
        align-items: center;
        gap: 10px;
      }
    </style>
  </head>
  <body>
    <h1>OM File Viewer</h1>

    <div class="controls">
      <label for="dataUrl">Data URL or S3 URI:</label>
      <input
        type="text"
        id="dataUrl"
        value="https://openmeteo.s3.amazonaws.com/data/dwd_icon_d2/temperature_2m/chunk_3996.om"
        placeholder="s3://bucket/key.om or https://example.com/data.om"
      />
      <button id="loadButton">Load Data</button>
    </div>

    <div class="controls">
      <label for="fileInput">or Select Local File:</label>
      <input type="file" id="fileInput" accept=".om" />
    </div>

    <div class="timestamp-nav">
      <button id="prevButton" disabled>←</button>
      <span id="timestampLabel">Timestamp: 0</span>
      <button id="nextButton" disabled>→</button>
    </div>

    <div id="plotArea"></div>
  </body>
</html>
